
echo "Compiling..."
compilor="ifort"
sourcecode1="./program/main_test.f90"
target1="./main_test.exe"

if [ -n "$1" ]
then
  if [ $1 = "-g" ] || [ $1 = "g" ]; then
      $compilor $sourcecode1 -o $target1 -g -no-pie
      echo "Debug version done!"
  elif [ $1 = "-p" ] || [ $1 = "p" ]; then
  #"loopprofileviewer.sh loop_prof_*.xml" to view profile
 
      $compilor -profile-functions -profile-loops=all -profile-loops-report=2 $sourcecode1 -O3 -o $target1
      echo "Profile version done!"
  else
      $compilor $sourcecode1 -O3 -o $target1
      echo "Done!"
  fi
else
  $compilor $sourcecode1  -o $target1
  echo "Done!"
fi

