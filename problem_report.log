
====================================================
================ TEST  BY  YUAN ====================
====================================================

1. FFT for complex quantities in tau representation

Test examples:
for N_t = 16
W(t) = delta(t) ==> W(omega) = 1 for all omega
G_0(t) ==> G_0(omega)    compared with hand-written test code result, the same 

Report:
The transform for G(t), W(t) and Gam(t) can all give the correct answer based on discrete FFT.
But the form of G(omega) is not the same with the answer from continuous FFT .
Periodic : W, Chi, Polar
Anti-Periodic : G, Gam, Sigma
====================================================

2. self-consistent integrals in k and omega representation

Test example:
1) Sigma(t) = (beta/N)**2.d0* \sum_{t1,t2} G(t1) W(t2) Gam(t2-t1, t-t2) direct integral compared with
FFT(Sigma(omega)) = FFT( beta**2.d0/N**3.d0 *\sum_{omega1} G(omega1) W(omega-omega1) Gam(omega1, omega))
Sigma(t) and FFT(Sigma(omega)) are the same

2) G(t) from old code and FFT(G(omega)) from the current code are the same with error 1% after several 
self-consistent loops

3) W(t) from old code and FFT(W(omega)) from the current code are the same with error 5% after several 
self-consistent loops except for the tau=0 point

	After adding the correction term in Polar, W(t) from old code and FFT(W(omega)) from the current 
	code are the same with error 5% for r=(0,0) and r=(1,1); but r=(1,0) still need to be checked

4) Write a new code using tau integral and compare it with W(0,0), W(1, 0) and W(1,1), get the same answer

Report:
The self-consistent integrals can give the right answer when they are transferred back to t domain

====================================================

3. mc update: change_gamma_type

Test example:
1) Order1 diagram: 
initial: 1 is the measureGam, IsDeltaVertex(1) =1;  IsDeltaVertex(2:4) = 0; Type(1:4) = 1
weight: WeightGam(Type=1:6) = 1
result:
after updates, Conf(Type(1:4)==1)/Conf(total) = 0.125

Report:
The update change_gamma_type can change the gamma types with uniform distribution

====================================================

4. mc update: move_measuring_index

Test example:
1) Order1 diagram: 
initial: 1 is the measureGam, IsDeltaVertex(1:4) =1;  IsDeltaLn(3)=IsDeltaLn(6)=0
weight: WeightGam(Type=1:6) = 1
result:
after updates, Conf(measureGam==1)/Conf(total) = 0.25

Report:
The update move_measuring_index can move measureGam around with uniform distribution

Notes:
For the measuring part, only allow IsDeltaVertex(measureGam)=1 and IsDeltaLn(MeasureW)=0

====================================================

5. mc update: change_wline_isdelta

Test example:
1) Order1 diagram: 
initial: 1 is the measureGam, IsDelta(1:4) =1;  IsDeltaLn(3) = IsDeltaLn(6)=0
weight: WeightGam(Type=1:6) = 1, WeightLn(:) = 1

result:
after updates, Conf(Status(3)==0 .and. IsDelta(3)==1)/Conf(total) = 0.33
Conf(Status(3)==0 .and. IsDelta(3)==0)/Conf(total) = 0.167

Report:
The update can change wline between delta and normal functions

Notes:
If a delta Gamma is connected with W, change all the 3 times in Gamma;
If a normal Gamma in connected with W, change only T3 in Gamma.

====================================================

6. mc update: change_gamma_isdelta

Test example:
1) Order1 diagram: 
initial: 1 is the measureGam, IsDelta(1:4) =1;  IsDeltaLn(3) = IsDeltaLn(6)=0
weight: WeightGam(Type=1:6) = 1, WeightLn(:) = 1

result:
after updates, Conf(StatusVertex(1)==0 .and. IsDelta(1)==1)/Conf(total) = 0.60
Conf(Status(1)==0 .and. IsDelta(1)==0)/Conf(total) = 0.15 

Report:
The update can change gamma between delta and normal functions

Notes:
change the time variables for Gin and Gout when change_gamma_isdelta

====================================================

7. mc update: create_worm_along_wline/delete_worm_along_wline

Test example:
1) Order1 diagram: 
initial: 1 is the measureGam, IsDelta(1:4) =1;  IsDeltaLn(3) = IsDeltaLn(6)=0
weight: WeightGam(Type=1:6) = 1, WeightLn(:) = 1

result:
Conf(with worm)/conf(total) = 0.80

Report:
The updates can add and delete worm with uniform weights

====================================================

8. DRAW configuration

Test example:
1) Order1 diagram without bubble
2) Order2 diagram
3) Order1 diagram with a bubble

====================================================




====================================================
========== TEST  BY  KUN ===========================
====================================================
1. MC update: change_wline_space (mc1)

Test example:
1) G = 1; W(r) = 1; Gam(r) = 1  Lx=Ly=2
   result: Conf(total)/Conf(WX(1)=WY(1)=0) = 4.00 

Report:

====================================================




====================================================
======================== BUGS ======================
====================================================

1. The matrix W,Pi,Chi,Gam in r should be (L*L), not (MXL*MXL), otherwise the fourier
transformation would fail

2. The coeffecient in self-consistent integrals should be multiplied by (Beta/N)**4.d0
The delta function in discrete tau domain should be multiplied by (N/Beta)

3. A bug in transfer_Sigma_t (dimension is 1, not Lx*Ly)

